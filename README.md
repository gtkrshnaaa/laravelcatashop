# Comprehensive Masterplan: LaravelCataShop

### 1. Latar Belakang & Filosofi

* **Context:** Ekosistem web modern seringkali *over-engineered*. Toko online sederhana sering dipaksa menggunakan arsitektur *Microservices* atau *SPAs* (React/Vue) yang berat, padahal trafiknya belum butuh itu. Selain itu, potongan biaya *Payment Gateway* (3-5%) cukup membebani margin UMKM.
* **The Gap:** Belum ada *boilerplate* Laravel yang benar-benar "telanjang" (native) tapi punya fitur *ledger* (pencatatan) yang kuat untuk transaksi manual.
* **Philosophy:** **"Digital Ledger, Manual Trust."** Aplikasi ini bertindak sebagai akuntan digital yang mencatat pesanan, sementara aliran uang terjadi secara *direct* (P2P) untuk menjaga keuntungan penjual tetap utuh 100%.

### 2. Visi & Misi

* **Visi:** Menjadi referensi utama (*Gold Standard*) bagaimana membangun aplikasi Monolith yang *scalable* di atas infrastruktur minimal (VPS murah/Shared Hosting + SQLite).
* **Misi:**
* **Zero-Dependency Policy:** Tidak menginstall *package* composer tambahan kecuali benar-benar darurat.
* **Atomic Blade Design:** Membuktikan bahwa Blade + Tailwind CDN bisa se-interaktif SPA jika distruktur dengan benar.
* **Financial Integrity:** Menyediakan sistem pencatatan yang tidak bisa dimanipulasi sembarangan (audit trail).



### 3. Entitas Utama & Struktur Data (SQLite Optimized)

Kita desain skema database ini agar hemat *storage* tapi kaya data.

1. **Users (Admins)**
* Standard Laravel Auth (guard: `web`).
* Role tunggal: *Store Owner*.


2. **Categories**
* `slug` (index): Untuk URL SEO-friendly.
* `is_featured` (boolean): Untuk filter produk unggulan di homepage.


3. **Products**
* `price` (decimal/integer): Hindari float untuk uang.
* `stock_control` (boolean): Apakah produk ini stoknya dilacak atau *always available* (misal produk digital).
* `sku` (string, unique): Kode unik barang untuk manajemen gudang.
* `images` (json/text): Support multiple images dalam satu kolom (array path).


4. **Transactions (The Ledger)**
* `invoice_code` (string): Format `INV/2026/X/ROM` (Generated by Service).
* `customer_info` (json): Menyimpan Snapshot data nama, wa, alamat saat transaksi (jaga-jaga user pindah rumah).
* `payment_method` (enum): `bank_transfer`, `cod`.
* `unique_code` (int): 3 digit kode unik (1-999) untuk verifikasi mutasi otomatis oleh mata manusia.
* `amount_total` (decimal): Total belanja + Kode unik.
* `status_history` (json): Log kapan status berubah dan siapa yang mengubah (Audit Trail).


5. **TransactionItems**
* `price_locked` (decimal): **Penting!** Harga saat tombol checkout ditekan. Jika besok harga produk naik, data di history order ini tidak boleh berubah.



### 4. Fitur, Modul & Halaman (Deep Dive)

#### A. Modul Storefront (Guest Experience)

*Fokus: Kecepatan Load & User Experience.*

* **Global Components:**
* `Navbar` dengan indikator jumlah cart (baca dari Session).
* `Toast Notification` (Native session flash message) untuk feedback "Masuk Keranjang".


* **Catalog Page:**
* *Logic:* Eager Loading (`with('category')`) untuk mencegah N+1 Query.
* *UI:* Grid responsif dengan Tailwind. Filter kategori menggunakan Query String (`?category=baju`).


* **Session-Based Cart (Tanpa Database):**
* Keranjang disimpan di `Session::put('cart', [])`.
* Alasannya: Cepat, tidak membebani database dengan data sampah (orang iseng add to cart tapi gak beli).
* Data baru masuk DB `transactions` hanya saat user klik "Finalize Order".


* **Checkout Logic:**
* Validasi stok *real-time* saat tombol ditekan.
* Kalkulasi kode unik: Cek 3 digit terakhir dari total belanja, pastikan tidak tabrakan dengan transaksi *pending* lain.


* **Post-Checkout (Invoice):**
* Halaman statis berisi instruksi.
* Tombol *"Saya Sudah Bayar"* yang men-trigger notifikasi ke Admin (bisa via Email/Telegram webhook nanti).



#### B. Modul Backoffice (Admin Management)

*Fokus: Data Control & Order Processing.*

* **Dashboard Analytics:**
* *Metrics:* Omzet hari ini, Order Pending, Produk stok menipis.
* Query di-cache sederhana (10 menit) agar dashboard ringan.


* **Order Management (Kanban/List):**
* Fitur filter berdasarkan status (`pending`, `paid`, `shipped`).
* **Action Button:** Verifikasi Pembayaran (Admin mencocokkan kode unik  Klik "Paid"  Stok berkurang otomatis).


* **Product Inventory:**
* Upload gambar menggunakan `Storage::disk('public')`.
* Auto-resize gambar (opsional, pakai helper PHP native GD Library biar gak perlu library berat).



### 5. User Flow (Skenario Komprehensif)

**Skenario Transaksi:**

1. **Inisiasi:** User klik "Beli"  Controller cek Session Cart. Jika produk sudah ada, update Qty. Jika belum, push array baru.
2. **Review:** User buka halaman Cart. Controller me-looping array Session dan mengambil detail info produk terbaru dari DB (untuk pastikan harga valid).
3. **Checkout:**
* User input Nama & WA.
* **System Action:** `DB::beginTransaction()`.
* Create `Transaction` record status `UNPAID`.
* Move data Session Cart ke `TransactionItems`.
* Generate `unique_code`.
* `DB::commit()`.
* Flush Session Cart.


4. **Pembayaran:** User melihat total **Rp 150.123**. User transfer.
5. **Konfirmasi:** User klik link WA. Admin terima chat template: *"Halo, saya sudah transfer Rp 150.123 untuk INV/001"*.
6. **Verifikasi:** Admin buka M-Banking, cari angka `123`. Ketemu!
7. **Finalisasi:** Admin login panel  Order #001  Set Status `PAID`. Sistem otomatis kirim notifikasi (opsional) atau update stok di DB.

### 6. Tech Stack (The "Pure Native" Specs)

* **Framework:** **Laravel 11.x**.
* **Database:** **SQLite**.
* *Config:* Aktifkan mode `WAL` (Write-Ahead Logging) di file config database agar tidak *locking* saat trafik tinggi.


* **Frontend Engine:**
* **Blade Templates:** Menggunakan `Components` (`<x-card>`, `<x-input>`) untuk reusability.
* **Tailwind CSS:** Via **PlayCDN** (`<script src="cdn..."></script>`) di layout utama. Custom config (warna/font) ditaruh di blok `<script>` config tailwind di head.
* **Alpine.js (Minimal):** Hanya untuk *dropdown* navbar dan *modal* konfirmasi delete.


* **Server Requirement:**
* PHP 8.2+.
* Ext-SQLite3 & Ext-GD (untuk gambar).
* Bisa jalan di VPS 1 Core / 512MB RAM sekalipun.



### 7. Ringkasan Akhir

**`laravelcatashop`** bukan sekadar proyek latihan. Ini adalah **manifesto efisiensi**.

Dengan struktur ini, kita membuang lemak-lemak yang tidak perlu dalam pengembangan web modern (transpilasi JS, payment gateway complex, database server berat). Hasilnya adalah aplikasi yang:

1. **Portable:** Satu folder project bisa dipindah kemana saja langsung jalan.
2. **Fast:** Tanpa overhead request ke API pihak ketiga.
3. **Maintainable:** Kode Laravel murni yang mudah dibaca oleh developer PHP manapun.

Ini adalah definisi "Smart Engineering"â€”memilih alat yang tepat untuk masalah yang tepat, bukan sekadar ikut tren.

---
